80definta-z
90ls=0:lm=5:ws=0:wm=1
100gosub20000
120gosub20300
125preset(0,196):print#1,"Pintandoenlapage2level0"
130gosub20500
140gosub5000
150gosub6000
370 cls:preset (80,10):print #1,"The wathmen"
380 preset (70,20):print #1,"MSX Murcia 2022"
390 preset (0,70):print #1,"Debes de atrapar a los ladores por detras, si los coges por delente te matan"
400 preset (0,100):print #1,"Una vez atrapados, tienes que llamar a la policia y se abrira la puerta de salida"
440 preset (0,130):print #1,"Segun el ladron que atrapaes obtendras regalos"
450 preset (0,150):print #1,"El verde: te proporciona unas botas que te permiten saltar."
455 preset (0,170):print #1,"El rojo: te permite empujar bloques para atrapar a los enemigos"
460ifstrig(0)=-1thengoto470elsegoto460
470gosub20100
475gosub10000
476gosub7000
480gosub10100
500strig(0)on:onstriggosub5100
510key(1)on:onkeygosub5200
530onspritegosub5300:spriteon
540gosub3500
550gosub2900
2000gosub2500
2020putsprite10,(px,py),,ps
2030gosub3100
2040ift5<tsandt5<>tl(0)andt5<>tl(1)thenpy=py+pl
2060ift0=ththenspriteoff
2070ift0=tvthenspriteon
2080ift0=tmthenre=6:gosub2300:line(tx*8,(ty+1)*8)-((tx*8)+8,((ty+1)*8)+8),15,bf:m(ty-2,tx,ls)=0:pm=pm+10
2090iflg>0thengosub6500elseputspriteep(0),(ex(0),212),ec(0),es(0)
2100iflg=0theniftime/50mod2=0thencopy(0,32)-(16,48),1to(ox(0),oy(0)),0,tpsetelsecopy(16,32)-(32,48),1to(ox(0),oy(0)),0,tpset
2110iflg=0andt0=tf(0)orlg=0andt0=tf(1)thenla=1:lg=-1:copy(50,24)-(64,48),1to(ox(2),oy(2)),0
2120ifla=1andt0=td(0)orla=1andt0=td(1)thenlc=1
    2290 if lc=1 then a=usr6(0):lc=0: ls=ls+1:if ls>lm then wc=1 else preset(40,100):print #1,"Mission complete":gosub 20500:gosub 20100:gosub 10100:gosub 2900
    2295 if wc=1 then ws=ws+1:if ws>wm then print #1,"Game complete" else print #1,"World completed":ls=0:wc=0:gosub 20300:gosub 20500:gosub 20100:gosub 10100:gosub 2900
2297'gosub2900
2299goto2000
2300a=usr2(0)
2310ifre=1thenPLAY"O5L8V4M8000AADFG2AAAAr60GEFDCDGR8A2A2A8","o1v4cr8o2cr8o1v6cr8o2v4cr8o1cr8o2v6cr8"
2350ifre=5thenplay"l10o4v4gc"
2360ifre=6thenplay"t250o5v12dv9e"
2370ifre=7thenplay"O5L8V4M8000AADFG2AAAA"
2380ifre=8thenPLAY"S1M2000T150O7C32"
2390ifre=9thenPLAY"o2l64t255v10m6500c"
2400ifre=10thensound6,5:sound8,16:sound12,6:sound13,9
2420return
2500onstick(0)gosub2700,2500,2600,2500,2800,2500,2640
2599return
2600px=px+pv:pd=3:swapp(0),p(1):ps=p(1):ifpx>240thenpx=240
2630return
2640px=px-pv:pd=7:swapp(2),p(3):ps=p(3):ifpx<0thenpx=0
2660return
2700ift0=tl(0)ort0=tl(1)thenpy=py-pl:swapp(4),p(5):ps=p(4)
2750return
2800ift5=tl(0)ort5=tl(1)thenpy=py+pl:swapp(4),p(5):ps=p(4)
2850return
2900PRESET(0,212-40):PRINT#1,"F1-openMSXCTrl+F1cambialevel"
2960'ifpd=3andev(0)>0thenPRESET(0,212-32):PRINT#1,"modocaptura"
2965'ifpd=7andev(0)<0thenPRESET(0,212-32):PRINT#1,"modohuida"
2970PRESET(0,212-24):PRINT#1,"World:"ws"level:"ls
2975PRESET(0,212-16):PRINT#1,"Tocapture:"lg"$:"pm"live:"pe
2980PRESET(0,212-8):PRINT#1,"fre:"fre(0)
3020return
3100tx=(px)/8:ty=(py)/8
3120t0=m(ty-2,tx,ls)
3140t1=m(ty-4,tx,ls)
3150t3=m(ty-3,tx+1,ls)
3170t5=m(ty-1,tx,ls)
3190return
3500line(0,19*8)-(256,23*8),7,bf
3510PRESET(70,19*8):PRINT#1,"Objectspanel"
3520copy((128-128)*8,4*8)-(((128-128)*8)+8,(4*8)+8),2to(16,8*24),0,tpset
3590return
5000px=256/2:py=8*16:pd=3:pv=4:pl=8
5010dimp(6):p(0)=0:p(1)=1:p(2)=2:p(3)=3:p(4)=4:p(5)=5
5020pp=0:ps=1
5030pe=10:pm=0
5040return
5100beep
5190return
5200re=10:gosub2300
5210lc=1
5290return
5300spriteoff
5305putspriteep(0),(ex(0),212),eo(0),es(0)
5310iflg>0thenifpd=3andev(0)>0andpx<ex(0)orpd=7andev(0)<0andpx>ex(0)thenre=8:gosub2300:lg=lg-1:ey(0)=lz(lg):eo(0)=rnd(1)*11:ex(0)=230:putspriteep(0),(ex(0),ey(0)),eo(0),es(0)elsepe=pe-1:gosub10100:gosub2900
5330gosub2900
5340spriteon
5390return
6000ep=10
6000dimew(0),eh(0),es(0),ep(0),ex(0),ey(0),ev(0),el(1),ec(1),eo(1)
6010es(0)=8:ep(0)=1
6110ev(0)=2
6160ec(0)=0
6170eo(0)=rnd(1)*(6-4)+4
6390return
6500ex(0)=ex(0)+ev(0)
6510ifex(0)>240orex(0)<8thenev(0)=-ev(0)elsee5=m((ey(0)/8)-1,(ex(0)/8),ls):ife5<tl(0)thenev(0)=-ev(0)
6520ec(0)=ec(0)+1
6530ifec(0)>1thenec(0)=0
6540ifec(0)=0thenes(0)=8elsees(0)=9
6550ifev(0)>0thenPUTSPRITEep(0),(ex(0),ey(0)),eo(0),es(0)elsePUTSPRITEep(0),(ex(0),ey(0)),eo(0),es(0)+2
6590return
7000dimox(2),oy(2)
7090return
10000dimlz(5)
10090return
10100ifws=0andls=0thengosub10300
10160'ifws=0andls=3thengosub10600
10180'ifws=0andls=4thengosub10700
10200'ifws=0andls=5thengosub10800
10220'ifws=0andls=6thengosub10900
10222'ifws=1andls=0thengosub11000
10224'ifws=1andls=1thengosub11100
10226'ifws=1andls=2thengosub11200
10230'ifws=1andls=3thengosub11300
10232'ifws=1andls=4thengosub11400
10234'ifws=1andls=5thengosub11500
10236'ifws=1andls=6thengosub11600
10240return
10300la=0:lg=3
10310lz(0)=16*8:lz(1)=4*8:lz(2)=10*8
10320ex(0)=230:ey(0)=16*8
10330px=0:py=16*8
10340ox(0)=30*8:oy(0)=10*8
10350ox(1)=13*8:oy(1)=16*8
10360ox(2)=0:oy(2)=3*8
10370putsprite2,(ox(1),oy(1)),6+32,13
10380putsprite3,(ox(1),oy(1)),15+32,14
10390return
20000dimm(15,31,lm)
20010ts=224:dimtl(1):tl(0)=192:tl(1)=193:dimtd(1):td(0)=164:td(1)=165:th=37:tv=104:tm=4:dimtf(1):tf(0)=160:tf(1)=161
20090return
20100cls
20110copy(0,64)-(256,86),1to(0,0),0,tpset
20120copy(0,0)-(32*8,23*8),2to(0,3*8),0,tpset
20190return
20300print#1,"Cagandomapa"ws"levels0-6enarray"
20305ifws=0thenbload"world0.bin",r
20310ifws=1thenbload"world1.bin",r
20320ifws=2thenbload"world2.bin",r
20330md=&hc001
20390formf=0tolm
20400forf=0to15
20420forc=0to31
20430va=peek(md):md=md+1
20450ifva=255thenva=0
20460m(f,c,mf)=va
20480nextc
20490nextf
20495nextmf
20499return
20500setpage0,2:cls
20505_TURBOON(m(),ls)
20510forf=0to15
20520forc=0to31
20530tn=m(f,c,ls)
20540iftn>0andtn<32thencopy(tn*8,0)-((tn*8)+8,8),1to(c*8,f*8),2,tpset
20550iftn>=32andtn<64thencopy((tn-32)*8,8)-(((tn-32)*8)+8,8),1to(c*8,f*8),2,tpset
20560iftn>=32andtn<64thencopy((tn-32)*8,1*8)-(((tn-32)*8)+8,(1*8)+8),1to(c*8,f*8),2,tpset
20570iftn>=64andtn<96thencopy((tn-64)*8,2*8)-(((tn-64)*8)+8,(2*8)+8),1to(c*8,f*8),2,tpset
20580iftn>=96andtn<128thencopy((tn-96)*8,3*8)-(((tn-96)*8)+8,(3*8)+8),1to(c*8,f*8),2,tpset
20590iftn>=128andtn<160thencopy((tn-128)*8,4*8)-(((tn-128)*8)+8,(4*8)+8),1to(c*8,f*8),2,tpset
20600iftn>=160andtn<192thencopy((tn-160)*8,5*8)-(((tn-160)*8)+8,(5*8)+8),1to(c*8,f*8),2,tpset
20610iftn>=192andtn<224thencopy((tn-192)*8,6*8)-(((tn-192)*8)+8,(6*8)+8),1to(c*8,f*8),2,tpset
20620iftn>=224andtn<256thencopy((tn-224)*8,7*8)-(((tn-224)*8)+8,(7*8)+8),1to(c*8,f*8),2,tpset
20630nextc
20640nextf
20645_TURBOoff
20650setpage0,0
20690return
